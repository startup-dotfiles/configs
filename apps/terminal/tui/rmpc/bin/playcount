#!/usr/bin/env bash

# Track song play count
## https://mierak.github.io/rmpc/next/guides/on_song_change/#track-song-play-count
## Requirements:
## - To install `jq`
## - Set `sticker_file` in your mpd.conf

sticker=$(rmpc sticker get "$FILE" "playCount" | jq -r '.value')
if [ -z "$sticker" ]; then
    rmpc sticker set "$FILE" "playCount" "1"
else
    rmpc sticker set "$FILE" "playCount" "$((sticker + 1))"
fi
